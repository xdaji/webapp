(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-trends-user_trends_publish"],{"305f":function(e,t,i){"use strict";i("7a82");var n=i("ee27").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("f07e")),s=n(i("c964"));i("14d9");getApp();var o={data:function(){return{content:"",imgs:[],video:"",phone:"",userInfo:"",lat:"",lon:"",address:""}},onLoad:function(e){var t=this;if(!uni.getStorageSync("userinfo"))return this.tips("请先登录"),void setTimeout((function(){t.go("/pages/login/login")}),1e3);this.userInfo=uni.getStorageSync("userinfo")},mounted:function(){},methods:{go:function(e){uni.navigateTo({url:e})},upload_img:function(){var e=this;this.chooseMoreImage((function(t){uni.hideLoading(),e.imgs.push(t),e.$forceUpdate()})),console.log(e.imgs)},upload_video:function(){var e=this;this.chooseVideo((function(t){uni.hideLoading(),e.video=t,e.$forceUpdate(),console.log("sssssssssssssssssssssssss",e.video)}))},del_img:function(e,t){var i=this;uni.showModal({title:"提示",content:"确定删除吗",success:function(n){n.confirm&&i.del_key(e,t)}})},del_video:function(){var e=this;uni.showModal({title:"提示",content:"确定删除吗",success:function(t){t.confirm&&(e.video="")}})},add:function(){var e=this;return(0,s.default)((0,a.default)().mark((function t(){var i,n;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,console.log(i.content),n={content:i.content,imgs:i.imgs.join("|"),address:i.address,lat:i.lat,lon:i.lon,video:i.video},uni.showLoading(),t.next=6,uni.$api.userTrends.publish(n);case 6:t.sent,uni.hideLoading(),e.success("发布成功"),i.content="",i.imgs=[],i.video="",setTimeout((function(){i.go("/pages/trends/user_index?uid="+i.userInfo.id)}),2e3);case 13:case"end":return t.stop()}}),t)})))()},chooseLocation:function(){var e=this;uni.chooseLocation({success:function(t){console.log("选择的位置:",t),e.lat=t.latitude,e.lon=t.longitude,e.address=t.address},fail:function(e){console.error("位置选择失败:",e)}})}}};t.default=o},"31ab":function(e,t,i){"use strict";i.r(t);var n=i("305f"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},"809c":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,"uni-page-body[data-v-1fece0ae]{background:#13131f;color:#cfdadc}body.?%PAGE?%[data-v-1fece0ae]{background:#13131f}.upload_area[data-v-1fece0ae]{display:flex;align-items:space-between;position:relative}.upload_area_list[data-v-1fece0ae]{display:flex;flex-wrap:wrap}.upload_area .sc[data-v-1fece0ae]{width:30%;height:100px;margin-bottom:%?20?%;position:relative;z-index:0;border-radius:%?6?%;background:#24243e;justify-content:center;display:flex;align-items:center;flex-direction:column;color:#999;line-height:120%}.upload_area .kg[data-v-1fece0ae]{width:%?20?%}.upload_area .sc uni-text[data-v-1fece0ae]{font-size:%?20?%}.upload_area .ico2[data-v-1fece0ae]{width:%?80?%;height:%?80?%}",""]),e.exports=t},a281:function(e,t,i){var n=i("809c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("1212f728",n,!0,{sourceMap:!1,shadowMode:!1})},c60b:function(e,t,i){"use strict";i.r(t);var n=i("e140"),a=i("31ab");for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("cbe0");var o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"1fece0ae",null,!1,n["a"],void 0);t["default"]=c.exports},cbe0:function(e,t,i){"use strict";var n=i("a281"),a=i.n(n);a.a},e140:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",[i("v-uni-view",{staticClass:" pad"},[i("v-uni-view",{staticClass:" mt10 lr10"},[i("v-uni-view",{staticClass:"fs18 bold"},[e._v("我要发布")]),i("v-uni-textarea",{staticClass:"bz2 mt10  radius-10 ",staticStyle:{width:"100%"},attrs:{maxlength:"200",placeholder:"选择美图,讲点骚话"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),i("v-uni-view",{staticClass:"flex",staticStyle:{"justify-content":"flex-end"}},[e._v(e._s(e.content.length)+"/200")])],1),i("v-uni-view",{staticClass:"upload_area upload_area_list lr10"},[e._l(e.imgs,(function(t,n){return i("v-uni-view",{key:n,staticClass:"sc mr10",style:"background-image:url("+t+");background-repeat:no-repeat;background-size: 100%; background-position: center;"},[i("v-uni-view",{staticClass:"cc_del",staticStyle:{position:"absolute",right:"-12px",top:"-12px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.del_img(e.imgs,n)}}},[i("v-uni-image",{staticStyle:{width:"25px",height:"25px"},attrs:{src:"/static/chat/delete1.png"}})],1)],1)})),e.video?i("v-uni-view",{staticClass:"sc mr10",style:"background-image:url(/static/chat/video_cover.png);background-repeat:no-repeat;background-size:40%; background-position: center;"},[i("v-uni-view",{staticClass:"cc_del",staticStyle:{position:"absolute",right:"-12px",top:"-12px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.del_video.apply(void 0,arguments)}}},[i("v-uni-image",{staticStyle:{width:"25px",height:"25px"},attrs:{src:"/static/chat/delete1.png"}})],1)],1):e._e(),""==e.video&&e.imgs.length<16?i("v-uni-view",{staticClass:"sc"},[i("v-uni-image",{staticStyle:{width:"50px",height:"40px"},attrs:{src:"/static/chat/addimg.png"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload_img.apply(void 0,arguments)}}})],1):e._e(),""==e.video&&0==e.imgs.length?i("v-uni-view",{staticClass:"sc ml10"},[i("v-uni-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:"/static/chat/addvideo.png"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload_video.apply(void 0,arguments)}}})],1):e._e()],2)],1),i("v-uni-view",{staticClass:"flex-space item-center pad",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseLocation.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"item-center "},[i("v-uni-image",{staticClass:"pic-20 mr7",attrs:{src:"/static/chat/location.png"}}),e.address?i("v-uni-view",{staticStyle:{color:"deeppink"}},[e._v(e._s(e.address.slice(0,10)))]):i("v-uni-view",[e._v("选择位置")])],1),i("v-uni-image",{staticClass:"pic-20",attrs:{src:"/static/chat/r.png"}})],1),i("v-uni-view",{staticClass:"pad",staticStyle:{"padding-top":"20px"}},[i("v-uni-view",{staticClass:" flex-nowrap"},[i("v-uni-button",{staticClass:"but_default flex-1 flex-center ",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.add()}}},[e._v("发布")])],1)],1)],1)],1)},a=[]}}]);