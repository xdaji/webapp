(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-client-chat_message"],{"14f9":function(t,e,i){"use strict";var a=i("5060"),n=i.n(a);n.a},5060:function(t,e,i){var a=i("f06b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("0de96d06",a,!0,{sourceMap:!1,shadowMode:!1})},"60ce":function(t,e,i){"use strict";i.r(e);var a=i("ae01"),n=i("7056");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("14f9");var c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"268cab0a",null,!1,a["a"],void 0);e["default"]=u.exports},7056:function(t,e,i){"use strict";i.r(e);var a=i("9aac"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"9aac":function(t,e,i){"use strict";i("7a82");var a=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("5319"),i("14d9");var n=a(i("f07e")),s=a(i("c964")),c={data:function(){return{content:"",kefu_uid:1555,to_uid:1555,tel:"",weixin:"@dajiapp2",uid:0,userInfo:{},showSendBtn:!1,list:[],message:"",timer:null}},onLoad:function(t){"undefined"!=typeof t.to_uid&&(this.to_uid=t.to_uid),uni.getStorageSync("userinfo")&&(this.uid=uni.getStorageSync("userinfo").id),this.init()},onUnload:function(){clearInterval(this.timer)},onHide:function(){clearInterval(this.timer)},methods:{init:function(){var t=this;t.get_list(),clearInterval(this.timer),this.timer=setTimeout((function(){t.init()}),5e3)},focus:function(){this.showSendBtn=!0},blur:function(){var t=this;setTimeout((function(){t.showSendBtn=!1}),500)},get_list:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var i,a,s;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t,console.log("开始请求数据"),0!=i.id){e.next=4;break}return e.abrupt("return",!1);case 4:return a={to_uid:i.to_uid},e.next=7,uni.$api.chat.getMessageList(a);case 7:s=e.sent,console.log(i.list),console.log(i.list.length+":::"+s.list.length,"lengthhhhhhhhhhhhhhhhhhhhh"),i.list.length!=s.list.length&&(i.list=s.list,setTimeout((function(){uni.pageScrollTo({scrollTop:1e4})}),200)),console.log(s,"chattttttttttttttttttttt");case 12:case"end":return e.stop()}}),e)})))()},send:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var i,a,s,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t,console.log("开始请求数据"),t.message=t.message.replace(/^\s+|\s+$/g,""),t.message=t.message.replace(/<[^>]*>/g,""),""!=t.message){e.next=6;break}return e.abrupt("return");case 6:return a=t.message,s={to_uid:i.to_uid,message:a},t.message="",e.next=11,uni.$api.chat.send(s);case 11:c=e.sent,i.list.push({message:a,type:0,post_time:t.time(),post_uid:i.uid,recv_uid:i.to_uid}),setTimeout((function(){uni.pageScrollTo({scrollTop:1e4})}),200),console.log(c,"chattttttttttttttttttttt");case 15:case"end":return e.stop()}}),e)})))()},send_img:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var i;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t,console.log("开始请求数据"),t.upload_local_img((function(t){i.send_img_save(t)}));case 3:case"end":return e.stop()}}),e)})))()},send_img_save:function(t){var e=this;return(0,s.default)((0,n.default)().mark((function i(){var a,s;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e,s={to_uid:a.to_uid,message:t,type:1},i.next=4,uni.$api.chat.sendImg(s);case 4:i.sent,a.list.push({message:t,type:1,post_time:e.time(),post_uid:a.uid,recv_uid:a.to_uid}),setTimeout((function(){uni.pageScrollTo({scrollTop:1e4})}),200);case 7:case"end":return i.stop()}}),i)})))()}}};e.default=c},ae01:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"pd16_15"},[t.kefu_uid!=t.uid?i("v-uni-view",{staticClass:" shadow_black radius-10 bg_gray333 pd16_15"},[i("v-uni-view",{staticClass:"flex alcenter"},[i("v-uni-image",{staticClass:"adviser-face-big",attrs:{src:"/static/kefu.png"}}),i("v-uni-view",{staticClass:" pl15",staticStyle:{width:"calc(100% - 160rpx)"}},[i("v-uni-view",{staticClass:"ft16 cl-main ftw600"},[t._v("客服小妲")]),i("v-uni-view",{staticClass:"flex alcenter mt8"},[i("v-uni-view",{staticClass:"flex alcenter cl-notice"},[i("v-uni-text",{staticClass:"  ft14"},[t._v("✈ :")]),i("v-uni-text",{staticClass:"ft14 ml5"},[t._v("@xxxdaji")])],1),i("v-uni-view",{staticClass:"copy-tag ml10",style:{background:t.tempColor},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onddtel(t.weixin)}}},[t._v("复制")])],1)],1)],1)],1):t._e(),t.kefu_uid!=t.uid?i("v-uni-view",{staticClass:" radius-20 pad flex-column lr10 mt10 "},[i("v-uni-view",[i("v-uni-view",{staticClass:"flex-row mt10"},[i("v-uni-image",{staticClass:"radius-50 pic-40 border-gray",attrs:{src:"/static/kefu.png"}}),i("v-uni-view",{staticClass:"bg_chat_he",on:{click:function(e){arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",[t._v("你好，請問有遇到什麼問題？請詳細描述你的問題")])],1)],1)],1)],1):t._e(),t._l(t.list,(function(e){return t.list.length>0?i("v-uni-view",[i("v-uni-view",{staticClass:" radius-20 mt10 flex-column   "},[i("v-uni-view",[i("v-uni-view",{staticClass:" ",class:e.post_uid==t.uid?"flex-row-r":"flex-row"},[t.kefu_uid!=t.uid?i("v-uni-view",[e.post_uid==t.uid?i("v-uni-image",{staticClass:"radius-50 pic-40 border-gray",attrs:{src:"/static/tou_sq.png"}}):t._e(),e.post_uid!=t.uid?i("v-uni-image",{staticClass:"radius-50 pic-40 border-gray",attrs:{src:"/static/kefu.png"}}):t._e()],1):t._e(),t.kefu_uid==t.uid?i("v-uni-view",[e.post_uid!=t.uid?i("v-uni-image",{staticClass:"radius-50 pic-40 border-gray",attrs:{src:"/static/tou_sq.png"}}):t._e(),e.post_uid==t.uid?i("v-uni-image",{staticClass:"radius-50 pic-40 border-gray",attrs:{src:"/static/kefu.png"}}):t._e()],1):t._e(),i("v-uni-view",{class:e.recv_uid==t.uid?"bg_chat_he":"bg_chat_my"},[1==e.type?i("v-uni-view",[i("v-uni-image",{staticStyle:{"max-width":"100% !important"},attrs:{src:e.message,mode:"widthFix"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.bindImg(e.message)}}})],1):i("v-uni-view",[t._v(t._s(e.message))])],1),i("v-uni-image",{staticClass:"pic-30 lr10 mt6",attrs:{src:"/static/img/copy.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.copy(e.message)}}})],1)],1)],1)],1):t._e()})),i("v-uni-view",{staticClass:"h140px"}),i("v-uni-view",{staticClass:"fix-foot shadow_black ",staticStyle:{background:"#222"}},[i("v-uni-view",{staticClass:"flex-space pad item-center"},[i("v-uni-input",{staticClass:"flex-1 bg_black radius-5 h30px pl10 pr10",attrs:{type:"text","confirm-type":"send",placeholder:"输入..","placeholder-class":"gray999"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.send.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.focus()},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.blur()}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),i("v-uni-view",[t.showSendBtn?t._e():i("v-uni-image",{staticClass:"pic-30 ml10",attrs:{src:"/static/cam.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.send_img.apply(void 0,arguments)}}})],1),i("v-uni-view",[t.showSendBtn?i("v-uni-image",{staticClass:"pic-30 ml10",attrs:{src:"/static/send.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.send.apply(void 0,arguments)}}}):t._e()],1)],1)],1)],2)},n=[]},f06b:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'uni-page-body[data-v-268cab0a]{background:#111}body.?%PAGE?%[data-v-268cab0a]{background:#111}.adviser-face-big[data-v-268cab0a]{width:60px;height:60px;border-radius:%?80?%;background:#fff}.copy-tag[data-v-268cab0a]{width:%?96?%;height:%?40?%;color:#fff;font-size:%?24?%;text-align:center;line-height:%?40?%;border-radius:%?20?%}.bg_chat_he[data-v-268cab0a]{max-width:60%;min-width:10%;border-radius:6px;margin-left:20px;padding:8px;background:#333;font-size:14px;position:relative;color:#eee;line-height:1.7}.bg_chat_he[data-v-268cab0a]::before{background:#333;width:20px;height:20px;display:flex;position:absolute;left:-8px;top:8px;content:" ";-webkit-transform:rotate(230deg);transform:rotate(230deg);z-index:0}.bg_chat_he uni-view[data-v-268cab0a]{z-index:2;position:relative}.bg_chat_my[data-v-268cab0a]{max-width:60%;min-width:10%;border-radius:6px;background:#93ed6d;padding:8px;margin-right:20px;font-size:14px;position:relative;line-height:1.7}.bg_chat_my[data-v-268cab0a]::before{background:#93ed6d;width:20px;height:20px;display:flex;position:absolute;right:-6px;top:8px;content:" ";-webkit-transform:rotate(210deg);transform:rotate(210deg);z-index:0}.bg_chat_my uni-view[data-v-268cab0a]{z-index:2;position:relative}',""]),t.exports=e}}]);